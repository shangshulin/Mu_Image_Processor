# 肺叶分割功能测试指南

## 功能概述

本项目已成功集成了三种肺叶分割方法：

1. **阈值分割** - 使用Otsu自动阈值分割算法
2. **边缘检测+形态学操作分割** - 结合Sobel边缘检测和形态学操作
3. **区域生长分割** - 基于种子点的区域生长算法

## 测试步骤

### 1. 编译项目
- 打开Visual Studio
- 加载MyPhotoshop.sln解决方案
- 选择Release或Debug配置
- 编译整个项目

### 2. 准备测试图像
- 使用项目中的X光测试图像（实验六图片文件夹）
- 或准备其他胸部X光图像（支持BMP、JPG、PNG等格式）

### 3. 功能测试

#### 阈值分割测试
1. 打开一张胸部X光图像
2. 在菜单中找到肺叶分割相关选项
3. 选择"阈值分割肺叶分割"
4. 观察分割结果，肺部区域应显示为白色，背景为黑色

#### 边缘检测+形态学分割测试
1. 打开同一张图像
2. 选择"边缘检测+形态学分割"
3. 观察边缘检测和形态学处理的效果
4. 肺部内部区域应被正确标识

#### 区域生长分割测试
1. 打开同一张图像
2. 选择"区域生长肺叶分割"
3. 算法会自动选择种子点进行区域生长
4. 观察分割的连续性和准确性

## 预期结果

- **阈值分割**：快速、简单，适合对比度较好的图像
- **边缘+形态学**：能够处理复杂边界，但可能产生一些噪声
- **区域生长**：结果较为平滑，但对种子点选择敏感

## 性能特点

- 支持8位、24位、32位图像格式
- 包含形态学后处理（开运算和闭运算）去除噪声
- 集成撤销/重做功能
- 异常处理确保程序稳定性

## 注意事项

1. 处理大图像时可能需要较长时间
2. 不同的X光图像可能需要调整算法参数
3. 建议在处理前备份原始图像
4. 如遇到编译错误，检查是否包含了所有必要的头文件

## 故障排除

- 如果菜单项不显示，检查resource.h中的ID定义
- 如果功能无响应，检查消息映射是否正确
- 如果出现运行时错误，查看错误消息框的提示信息